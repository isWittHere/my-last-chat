{
  "name": "my-last-chat",
  "displayName": "My Last Chat",
  "description": "%extension.description%",
  "version": "0.1.3",
  "license": "MIT",
  "l10n": "./l10n",
  "icon": "res/my-last-chat.png",
  "publisher": "my-last-chat",
  "repository": {
    "type": "git",
    "url": "https://github.com/isWittHere/my-last-chat.git"
  },
  "engines": {
    "vscode": "^1.95.0"
  },
  "categories": [
    "Other",
    "AI"
  ],
  "keywords": [
    "chat",
    "copilot",
    "ai",
    "history",
    "summary"
  ],
  "activationEvents": [
    "onWebviewPanel:myLastChat.chatListPanel"
  ],
  "main": "./out/extension.js",
  "contributes": {
    "viewsContainers": {
      "activitybar": [
        {
          "id": "my-last-chat",
          "title": "My Last Chat",
          "icon": "res/my-last-chat.svg"
        }
      ]
    },
    "views": {
      "my-last-chat": [
        {
          "type": "webview",
          "id": "myLastChat.chatListView",
          "name": "%view.chatList.name%",
          "icon": "res/my-last-chat.svg"
        }
      ]
    },
    "commands": [
      {
        "command": "myLastChat.refresh",
        "title": "%command.refresh.title%",
        "icon": "$(refresh)",
        "category": "My Last Chat"
      },
      {
        "command": "myLastChat.createNew",
        "title": "%command.createNew.title%",
        "icon": "$(add)",
        "category": "My Last Chat"
      },
      {
        "command": "myLastChat.openSettings",
        "title": "%command.openSettings.title%",
        "icon": "$(gear)",
        "category": "My Last Chat"
      },
      {
        "command": "myLastChat.openFile",
        "title": "%command.openFile.title%",
        "category": "My Last Chat"
      },
      {
        "command": "myLastChat.openInEditor",
        "title": "%command.openInEditor.title%",
        "icon": {
          "light": "res/my-last-chat-light.svg",
          "dark": "res/my-last-chat-dark.svg"
        },
        "category": "My Last Chat"
      },
      {
        "command": "myLastChat.createNewFromPanel",
        "title": "%command.createNewFromPanel.title%",
        "icon": "$(add)",
        "category": "My Last Chat"
      }
    ],
    "menus": {
      "view/title": [
        {
          "command": "myLastChat.createNew",
          "when": "view == myLastChat.chatListView",
          "group": "navigation@1"
        },
        {
          "command": "myLastChat.refresh",
          "when": "view == myLastChat.chatListView",
          "group": "navigation@2"
        },
        {
          "command": "myLastChat.openSettings",
          "when": "view == myLastChat.chatListView",
          "group": "navigation@3"
        },
        {
          "command": "myLastChat.openInEditor",
          "when": "view == myLastChat.chatListView",
          "group": "navigation@4"
        }
      ],
      "editor/title": [
        {
          "command": "myLastChat.openInEditor",
          "when": "activeWebviewPanelId != myLastChat.chatListPanel",
          "group": "navigation"
        },
        {
          "command": "myLastChat.createNewFromPanel",
          "when": "activeWebviewPanelId == myLastChat.chatListPanel",
          "group": "navigation@1"
        }
      ]
    },
    "configuration": {
      "title": "%config.title%",
      "properties": {
        "myLastChat.storageLocation": {
          "type": "string",
          "enum": [
            "workspace",
            "global"
          ],
          "default": "workspace",
          "description": "%config.storageLocation.description%"
        },
        "myLastChat.globalStoragePath": {
          "type": "string",
          "default": "",
          "description": "%config.globalStoragePath.description%"
        },
        "myLastChat.autoHideControls": {
          "type": "boolean",
          "default": false,
          "description": "%config.autoHideControls.description%"
        }
      }
    },
    "languageModelTools": [
      {
        "name": "myLastChat_getLastChatsList",
        "displayName": "Get Last Chats List",
        "toolReferenceName": "lastchats",
        "description": "%tool.getLastChatsList.description%",
        "modelDescription": "Get a list of all chat summaries stored in the My Last Chat extension. Returns titles, descriptions, and metadata of saved chat history summaries. Use scope parameter to specify workspace, global, or all.",
        "canBeReferencedInPrompt": true,
        "icon": "$(comment-discussion)",
        "inputSchema": {
          "type": "object",
          "properties": {
            "feedbackLevel": {
              "type": "string",
              "enum": [
                "TITLE_ONLY",
                "DESCRIPTION",
                "META",
                "ALL"
              ],
              "default": "DESCRIPTION",
              "description": "%tool.getLastChatsList.feedbackLevel.description%"
            },
            "scope": {
              "type": "string",
              "enum": [
                "workspace",
                "global",
                "all"
              ],
              "default": "all",
              "description": "%tool.getLastChatsList.scope.description%"
            }
          }
        },
        "tags": [
          "chat",
          "history",
          "search"
        ]
      },
      {
        "name": "myLastChat_searchByTitle",
        "displayName": "Search Chats by Title",
        "toolReferenceName": "searchchat",
        "description": "%tool.searchByTitle.description%",
        "modelDescription": "Search chat summaries by matching keywords in the title. Supports multiple keywords to expand search scope. Use scope parameter to filter by workspace, global, or all.",
        "canBeReferencedInPrompt": true,
        "icon": "$(search)",
        "inputSchema": {
          "type": "object",
          "properties": {
            "keywords": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "%tool.searchByTitle.keywords.description%"
            },
            "feedbackLevel": {
              "type": "string",
              "enum": [
                "TITLE_ONLY",
                "DESCRIPTION",
                "META",
                "ALL"
              ],
              "default": "DESCRIPTION",
              "description": "返回信息的详细程度"
            },
            "scope": {
              "type": "string",
              "enum": [
                "workspace",
                "global",
                "all"
              ],
              "default": "all",
              "description": "搜索范围：workspace(仅工作区), global(仅全局), all(全部)"
            }
          },
          "required": [
            "keywords"
          ]
        },
        "tags": [
          "chat",
          "search",
          "title"
        ]
      },
      {
        "name": "myLastChat_searchByMeta",
        "displayName": "Search Chats by Metadata",
        "toolReferenceName": "searchmeta",
        "description": "%tool.searchByMeta.description%",
        "modelDescription": "Search chat summaries by matching keywords across all metadata fields including title, description, workplace, project, type, and solved_lists. Use scope parameter to filter by workspace, global, or all.",
        "canBeReferencedInPrompt": true,
        "icon": "$(file-code)",
        "inputSchema": {
          "type": "object",
          "properties": {
            "keywords": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "%tool.searchByMeta.keywords.description%"
            },
            "feedbackLevel": {
              "type": "string",
              "enum": [
                "TITLE_ONLY",
                "DESCRIPTION",
                "META",
                "ALL"
              ],
              "default": "META",
              "description": "返回信息的详细程度"
            },
            "scope": {
              "type": "string",
              "enum": [
                "workspace",
                "global",
                "all"
              ],
              "default": "all",
              "description": "搜索范围：workspace(仅工作区), global(仅全局), all(全部)"
            }
          },
          "required": [
            "keywords"
          ]
        },
        "tags": [
          "chat",
          "search",
          "metadata"
        ]
      }
    ]
  },
  "scripts": {
    "vscode:prepublish": "npm run package",
    "compile": "npm run check-types && node esbuild.js",
    "watch": "npm-run-all -p watch:*",
    "watch:esbuild": "node esbuild.js --watch",
    "watch:tsc": "tsc --noEmit --watch --project tsconfig.json",
    "package": "npm run check-types && node esbuild.js --production",
    "check-types": "tsc --noEmit",
    "pretest": "npm run compile && npm run lint",
    "lint": "eslint src",
    "test": "vscode-test"
  },
  "devDependencies": {
    "@types/node": "^20.10.0",
    "@types/vscode": "^1.95.0",
    "@typescript-eslint/eslint-plugin": "^8.0.0",
    "@typescript-eslint/parser": "^8.0.0",
    "@vscode/test-cli": "^0.0.10",
    "@vscode/test-electron": "^2.4.1",
    "esbuild": "^0.24.2",
    "eslint": "^9.0.0",
    "npm-run-all": "^4.1.5",
    "typescript": "^5.6.0"
  },
  "dependencies": {
    "@vscode/codicons": "^0.0.44",
    "gray-matter": "^4.0.3"
  }
}
